<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="static/images/favicon.png" type="">

  <title> Nova Clinic </title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="static/css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!--owl slider stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- font awesome style -->
  <link href="static/css/font-awesome.min.css" rel="stylesheet" />

  <!-- AJAX -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  

  <!-- Custom styles for this template -->
  <link href="static/css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="static/css/responsive.css" rel="stylesheet" />

</head>

<body>

  <div class="hero_area">

    <div class="hero_bg_box">
      <img src="static/images/hero-bg.png" alt="">
    </div>

    <!-- header section strats -->
    <header class="header_section">
      <div class="container">
       <nav class="navbar navbar-expand-lg custom_nav-container ">
        <div class="container-fluid">
            <a class="navbar-brand">
                <span>
                  Nova Clinic
                </span>
              </a>
              <div class="d-flex">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="aptmnt">Appointments</a>
                </li>

                <!-- <li class="nav-item">
                    <a class="nav-link" href="#">Doctors</a>
                  </li> -->
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Account
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <!-- <a class="dropdown-item" href="Edit">Edit Details</a> -->
                    <button type="button" 
                    class="btn dropdown-item" 
                    data-toggle="modal"
                    data-target="#book-modal">
                    Edit Details
                    </button>
                    <!--a class="dropdown-item" href="#">Change Password</a>-->
                    <button type="button" 
                    class="btn dropdown-item" 
                    data-toggle="modal"
                    data-target="#book-modal1">
                    Change Password
                    </button>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="logout">Logout</a>
                  </div>
                </li>
                
              </ul>
              
              <!-- </form> -->
            </div>
          </div>
            </div>
            
          </nav>

      </div>
    </header>


    
    <!-- end header section -->

    <!-- slider section -->
    <section class="slider_section ">
      <div id="customCarousel1" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="container ">
              <div class="row">
                <div class="col-md-7">
                  <div class="detail-box">
                    <h1>
                      We Provide Best Healthcare
                    </h1>
                    <p>
                      Customer healthcare is our atmost priority.
                    </p>
                    <button type="button" class="btn form-check-book-button book1" onclick="location.href = 'aptmnt'">
                    Book Appointment
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>
    <!-- end slider section -->
  </div>
  <div class="modal fade"
                 id="book-modal" data-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modal_title">
                              Update Details</h5>
                            <button type="button" 
                                    class="close" 
                                    data-dismiss="modal" 
                                    aria-label="Close"
                                    id="modalClose">
                                <span aria-hidden="true">
                                  x</span>
                            </button>
                        </div>
                        <form >
                          <div class="form-group">
                            <label id="firstname_input">First name</label>
                            <input type="text" class="form-control" name="FName" id="FName" placeholder="Update First Name" value={{Fname}}>
                            <!-- <small id="emailHelp" class="form-text text-muted">We'll never disclose your personal info with anyone else.</small> -->
                          </div>
                          <div class="form-group">
                            <label id="lastname_input">Last Name</label>
                            <input type="text" class="form-control" name="LName" id="LName" placeholder="Update Last Name" value={{Lname}}>
                          </div>
                          <div class="form-group">
                            <label id="phno_input">Phone Number</label>
                            <input type="text" class="form-control" name="Phno" id="Phno" placeholder="Update contact info" value={{phno}}>
                          </div>
                          <!-- <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">I confirm to update these details.</label>
                          </div> -->
                        <div class="form-group" style="text-align: center;">
                          <button name="update_atPatient" id="update_atPatient" class="btn btn-primary">Update</button>
                        </div>
                        <div id="form-group-wrapper-info" style="text-align: center;">
                        </div>
                        </form>

                        <!-- <div class="modal-footer">
                            <button type="button"
                                    class="btn btn-secondary" 
                                    data-dismiss="modal">
                              Close</button> -->
                            <!-- <button type="button" 
                                    class="btn btn-primary">
                              Save changes</button> -->
                        <!-- </div> -->
                    </div>
                </div>
            </div>

            <div class="modal fade"
            id="book-modal1" data-backdrop="static" data-bs-keyboard="false">
           <div class="modal-dialog modal-dialog-centered">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="modal_title">
                        Change Password</h5>
                       <button type="button" 
                               class="close" 
                               data-dismiss="modal" 
                               aria-label="Close"
                               id="modalClose">
                           <span aria-hidden="true">
                             x</span>
                       </button>
                   </div>
                   <form>
                     <div class="form-group">
                       <label for="Currentpassword">Current Password</label>
                       <input type="password" class="form-control" id="Currentpassword" placeholder="Enter your current password">
                       <!-- <small id="emailHelp" class="form-text text-muted">We'll never disclose your personal info with anyone else.</small> -->
                     </div>
                     <div class="form-group">
                       <label for="Newpassword">New Password</label>
                       <input type="password" class="form-control" id="Newpassword" placeholder="Enter new password">
                     </div>
                     <div class="form-group">
                       <label for="Confirmpassword">Confirm Password</label>
                       <input type="password" class="form-control" id="Confirmpassword" placeholder="Re-enter Password">
                     </div>
                     <!-- <div class="form-group form-check">
                       <input type="checkbox" class="form-check-input" id="exampleCheck1">
                       <label class="form-check-label" for="exampleCheck1">I confirm to update these details.</label>
                     </div> -->
                     <div class="form-group" style="text-align: center;">
                     <button class="btn btn-primary" name="update_atPatient_credentials" id="update_atPatient_credentials" >Update</button>
                    </div>
                    <div id="form-group-wrapper-credentials" style="text-align: center;">
                     </div>
                   </form>
               </div>
           </div>
       </div>




  <!-- department section -->
  <block> 
    <head>
      <style>
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }
      
      td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }
      
      </style>
      </head>
      <body>
      
      {% if result%}
        
      <div class="form-group" id="tablediv">
        <h2>Your Appointments</h2>
      <table class="table-striped">
        <tr>
          <th>Appointment ID</th>
          <th>Doctor ID</th>
          <th>Doctor Name</th>
          <th>Specialization</th>
          <th>Patient Name</th>
          <th>Appointment Date</th>
          <th>Appointment Time</th>
        </tr>
        {%for a_tuple in result%}
        <tr>
          <td>{{a_tuple[0]}}</td>
          <td>{{a_tuple[1]}}</td>
          <td>{{a_tuple[2]}} {{a_tuple[3]}}</td>
          <td>{{a_tuple[6]}}</td>
          <td>{{a_tuple[4]}} {{a_tuple[5]}}</td>
          <td>{{a_tuple[7]}}</td>          
          <td>{{a_tuple[8]}}</td>
        </tr>
        {% endfor %}
        
      </table>
    </div>
    {% endif %}
      </body>
  <section class="department_section layout_padding">
    <div class="department_container">
      <div class="container ">
        <div class="heading_container heading_center">
          <h2>
            Our Specilizations
          </h2>
          <p>
            We specialize in the following departments.
          </p>
        </div>
        <div class="row">
          <div class="col-md-3">
            <div class="box ">
              <div class="img-box">
                <img src="static/images/cardiology.png" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Cardiology
                </h5>
                <p>
                  Schedule a general checkup
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="box ">
              <div class="img-box">
                <img src="static/images/den.png" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Dentist
                </h5>
                <p>
                  Teething trobules? Schedule a dental checkup
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="box ">
              <div class="img-box">
                <img src="static/images/gp.png" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  General Physician
                </h5>
                <p>
                  Have fever? Schedule a general health Checkup
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="box ">
              <div class="img-box">
                <img src="static/images/brain.png" alt="">
              </div>
              <div class="detail-box">
                <h5>
                  Neruologist
                </h5>
                <p>
                  Chronic Headaches? Schedule an appointment
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</block>

  <!-- end department section -->


  <!-- contact section -->
  <!-- <section class="contact_section layout_padding" style="background-color: #178066;">
    <div class="container">
      <div class="heading_container" style="color: white">
        <h2>
          Get In Touch
        </h2>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="form_container contact-form">
            <form method="POST">
              <div class="form-row">
                <div class="col-lg-6">
                  <div>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Your Name" />
                  </div>
                </div>
                <div class="col-lg-6">
                  <div>
                    <input type="text" class="form-control" id="docname" name="docname" placeholder="Consulted Doctor name" />
                  </div>
                </div>
              </div>
              <div>
                <input type="text" class="form-control" id="spec" name="spec" placeholder="Doctor specialization" />
              </div>
              <div>
                <input type="text" class="message-box" id="message" name="message" placeholder="Your Message" />
              </div>
              <div class="btn_box">
                <button type="submit" class="btn btn-primary">
                  SEND
                </button>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-6">
          <div class="map_container">
            <div class="map">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1150.280103488165!2d78.43277982922585!3d17.568277277801105!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTfCsDM0JzA1LjgiTiA3OMKwMjUnNjAuMCJF!5e1!3m2!1sen!2sin!4v1634893782062!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %} {% if category ==
    'error' %}
    <div class="alert alert-danger alter-dismissable fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    {% else %}
    <div class="alert alert-success alter-dismissable fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    {% endif %} {% endfor %} {% endif %} {% endwith %} -->
  <!-- end contact section -->



  {% include 'footer.html' %}

  <!-- jQery -->
  <script type="text/javascript" src="static/js/jquery-3.4.1.min.js"></script>
  <!-- popper js -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <!-- bootstrap js -->
  <script type="text/javascript" src="static/js/bootstrap.js"></script>
  <!-- owl slider -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>
  <!-- custom js -->
  <script type="text/javascript" src="static/js/custom.js"></script>
  <script type="text/javascript" src="static/js/custom.js"></script>
  <!-- To send data of others -->
  
  <script type="text/javascript">
  var name_of_the_patient_chosen,p_FName,p_LName,p_Phno,p_CurrentPassword,p_Newpassword,p_Confirmpassword;
   $("#update_atPatient").click(function(){
    p_FName = $("#FName").val();
    p_LName = $("#LName").val();
    p_Phno=$("#Phno").val();
      $.ajax({
      type: "POST",
      url: "/updateInfo",
      data: {"p_FName":p_FName,"p_LName":p_LName,"Phno":p_Phno},
      success:function(data){
        if(data=='failed'){
          alert('Please enter your details correctly');
        }
        else if(data=='failed1'){
          alert('An account already exists with the given new phone number');
        }
        else if(data=='success'){
          alert('Success');
        }
      }
      });
   });
  
   $("#update_atPatient_credentials").click(function(){
    p_CurrentPassword = $("#Currentpassword").val();
    p_Newpassword = $("#Newpassword").val();
    p_Confirmpassword=$("#Confirmpassword").val();
    $.ajax({
      type: "POST",
      url: "/updateCredentials",
      data: {"p_CurrentPassword":p_CurrentPassword,"p_Newpassword":p_Newpassword,"p_Confirmpassword":p_Confirmpassword},
      success:function(data){
        // alert(data);
        if(data=='failed'){
          alert('Entered password is incorrect');
        }
        else if(data=='failed1'){
          alert('Passwords doesn\'t match');
        }
        else if(data=='failed2'){
          alert('Password minimum length should be 6');
        }
        else if(data=='success'){
          alert('Success');
        }
      }
      });
   });

  //  if({result}==None){
  //    $('#tablediv').hide();
  //  }
   
  </script>
  

  <div class="loader-wrapper">
    <span class="loader"><span class="loader-inner"></span></span>
  </div>
  <script>
      $(window).on("load",function(){
        $(".loader-wrapper").fadeOut("slow");
      });
  </script>

</body>

</html>